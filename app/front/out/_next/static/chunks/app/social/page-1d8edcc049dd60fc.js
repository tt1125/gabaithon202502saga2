(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{1890:(e,t,i)=>{Promise.resolve().then(i.bind(i,3597))},3597:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>C});var s=i(5155),r=i(2115),n=i(8562),a=i(8998),o=i(562),l=i(810),d=i(7493),c=i(4333),x=i(4057);let u=(0,x.A)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),h=(0,x.A)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);function p(e){let{postData:t}=e;return(0,s.jsx)(n.A,{elevation:1,sx:{mb:2,borderRadius:2,overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:3}},onClick:()=>{alert("コメントが押された")},children:(0,s.jsxs)(a.A,{sx:{display:"flex",p:2},children:[(0,s.jsx)(o.A,{src:t.img_url,sx:{width:56,height:56,bgcolor:"#9333EA",mr:2}}),(0,s.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[(0,s.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[(0,s.jsxs)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:[t.name,"　",(0,s.jsxs)(l.A,{variant:"body2",component:"span",children:[t.age,"歳　","male"===t.gender?"男性":"female"===t.gender?"女性":"その他"]})]}),(0,s.jsx)(l.A,{variant:"caption",sx:{color:"text.secondary"},children:new Date(t.created_at).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),(0,s.jsx)(l.A,{variant:"subtitle2",sx:{fontWeight:"medium",color:"#4F46E5",mb:.5},children:t.title}),(0,s.jsx)(l.A,{variant:"body2",sx:{color:"text.secondary",mb:2},children:t.comment}),(0,s.jsxs)(a.A,{sx:{position:"relative",pl:4,"&::before":{content:'""',position:"absolute",left:"12px",top:"8px",bottom:"8px",width:"2px",background:"linear-gradient(to bottom, #9333EA 0%, #DB2777 100%)",borderRadius:"1px"}},children:[(0,s.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1.5,position:"relative"},children:[(0,s.jsx)(a.A,{sx:{position:"absolute",left:"-28px",backgroundColor:"#9333EA",borderRadius:"50%",p:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(d.A,{className:"w-4 h-4 text-white"})}),(0,s.jsx)(l.A,{variant:"body2",sx:{color:"#9333EA",fontWeight:"medium"},children:t.origin_name})]}),(0,s.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1.5,position:"relative"},children:[(0,s.jsx)(a.A,{sx:{position:"absolute",left:"-28px",backgroundColor:"#AB4BED",borderRadius:"50%",p:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(c.A,{className:"w-4 h-4 text-white"})}),(0,s.jsx)(l.A,{variant:"body2",sx:{color:"#AB4BED",fontWeight:"medium"},children:t.point1_name})]}),(0,s.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1.5,position:"relative"},children:[(0,s.jsx)(a.A,{sx:{position:"absolute",left:"-28px",backgroundColor:"#C162F0",borderRadius:"50%",p:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(u,{className:"w-4 h-4 text-white"})}),(0,s.jsx)(l.A,{variant:"body2",sx:{color:"#C162F0",fontWeight:"medium"},children:t.point2_name})]}),(0,s.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",position:"relative"},children:[(0,s.jsx)(a.A,{sx:{position:"absolute",left:"-28px",backgroundColor:"#DB2777",borderRadius:"50%",p:.5,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(h,{className:"w-4 h-4 text-white"})}),(0,s.jsx)(l.A,{variant:"body2",sx:{color:"#DB2777",fontWeight:"medium"},children:t.point3_name})]})]})]})]})})}var m=i(3376),f=i(6793),g=i(2560),b=i(1441),v=i(6854),y=i(4918),j=i(2983);let w=(0,j.A)((0,s.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),A=(0,j.A)((0,s.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),N=(0,j.A)((0,s.jsx)("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2M9.8 8.9 7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6z"}),"DirectionsWalk");var I=i(415);function C(){var e,t;let{logout:i}=(0,m.Z)(),n=(0,r.useContext)(m.c),d=null===(e=n.user)||void 0===e?void 0:e.displayName,c=null===(t=n.user)||void 0===t?void 0:t.photoURL,[x,u]=(0,r.useState)([]),[h,j]=(0,r.useState)([]),[C,k]=(0,r.useState)(""),[S,_]=(0,r.useState)(0),[E,P]=(0,r.useState)(!1),[W,z]=(0,r.useState)(!0),[B,D]=(0,r.useState)(!1),O=(0,r.useRef)(null),T=async e=>{try{P(!0);let t=await fetch("".concat(I.h,"/get_recent_posts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({offset:e})}),i=await t.json();Array.isArray(i.result)&&i.result.length>0?u(e=>[...e,...i.result]):z(!1)}catch(e){console.error("最新投稿の取得に失敗しました:",e)}finally{P(!1)}},F=async e=>{D(!0);try{let t=await fetch("".concat(I.h,"/api/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}),i=await t.json();j(i)}catch(e){console.error("検索に失敗しました:",e)}finally{D(!1)}};(0,r.useEffect)(()=>{T(0)},[]),(0,r.useEffect)(()=>{""===C.trim()&&W&&0!==S&&T(S)},[S,C,W]),(0,r.useEffect)(()=>{let e=new IntersectionObserver(e=>{e[0].isIntersecting&&!E&&W&&!B&&""===C.trim()&&_(e=>e+8)},{root:null,rootMargin:"0px",threshold:1});return O.current&&e.observe(O.current),()=>{O.current&&e.unobserve(O.current)}},[E,W,B,C]),(0,r.useEffect)(()=>{""===C.trim()?j([]):F(C.trim())},[C]);let M=C.trim()?h:x;return(0,s.jsx)("main",{style:{zIndex:5},className:"h-screen bg-gradient-to-r from-purple-500 to-indigo-600",children:(0,s.jsxs)(a.A,{sx:{width:"100%",height:"100vh",display:"flex",flexDirection:"column",backgroundColor:"white"},children:[(0,s.jsxs)(a.A,{sx:{height:"128px",background:"linear-gradient(to right, #9333ea, #4f46e5)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",position:"fixed",width:"100%",top:0,zIndex:1e3},children:[(0,s.jsxs)(a.A,{sx:{position:"absolute",inset:0,opacity:.2},children:[(0,s.jsx)(N,{sx:{position:"absolute",top:"16px",left:"16px",width:"32px",height:"32px",color:"white"}}),(0,s.jsx)(N,{sx:{position:"absolute",bottom:"16px",right:"16px",width:"32px",height:"32px",color:"white"}})]}),(0,s.jsx)(l.A,{variant:"h4",sx:{fontWeight:"bold",color:"white",zIndex:10},children:"WalkBuddy"})]}),(0,s.jsxs)(a.A,{sx:{px:4,py:2,display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,marginTop:"160px"},children:[(0,s.jsxs)(a.A,{sx:{maxWidth:"600px",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,s.jsxs)(a.A,{sx:{display:"flex",alignItems:"center"},children:[(0,s.jsx)(o.A,{sx:{bgcolor:"#9e9e9e",mr:1},src:null!=c?c:""}),(0,s.jsx)(l.A,{variant:"subtitle1",children:d})]}),(0,s.jsx)(f.A,{variant:"contained",color:"secondary",size:"small",onClick:i,startIcon:(0,s.jsx)(A,{}),sx:{background:"linear-gradient(to right, #9333ea, #4f46e5)",color:"white","&:hover":{background:"linear-gradient(to right, #7e22ce, #4338ca)"}},children:"ログアウト"})]}),(0,s.jsx)(a.A,{sx:{width:"100%",maxWidth:"800px",mb:4},children:(0,s.jsx)(g.A,{value:C,onChange:e=>k(e.target.value),variant:"outlined",placeholder:"検索",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"9999px","&:hover fieldset":{borderColor:"#9333ea"},"&.Mui-focused fieldset":{borderColor:"#4f46e5"}}},InputProps:{startAdornment:(0,s.jsx)(b.A,{position:"start",children:(0,s.jsx)(w,{sx:{color:"gray",mr:1}})})}})}),B&&(0,s.jsxs)(a.A,{sx:{mb:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,s.jsx)(v.A,{color:"secondary"}),(0,s.jsx)(l.A,{variant:"body2",sx:{mt:3},children:"検索中"})]}),(0,s.jsx)(y.A,{sx:{width:"100%",maxWidth:"90%",mx:"auto",mb:4},children:M.map((e,t)=>(0,s.jsx)(p,{postData:e},t))}),(0,s.jsx)(a.A,{ref:O,sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50px"},children:E&&!B&&(0,s.jsx)(v.A,{color:"secondary"})})]}),(0,s.jsx)(a.A,{sx:{p:2,textAlign:"center"},children:(0,s.jsx)(l.A,{variant:"caption",sx:{color:"text.secondary"},children:"毎日の一歩が、健康な未来への一歩"})})]})})}},757:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var s=i(5155),r=i(3478),n=i(5355);function a(e){let{message:t="読み込み中..."}=e;return(0,s.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900 via-purple-700 to-indigo-800 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center space-y-6",children:[(0,s.jsxs)("div",{className:"relative w-32 h-32 mx-auto",children:[[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(r.P.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2*t},children:(0,s.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:2-.5*t,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"w-full h-full rounded-full border-4 border-transparent\n                ".concat(0===t?"border-t-purple-500":1===t?"border-r-pink-500":"border-b-indigo-500"),style:{borderWidth:"".concat(4-t,"px")}})},t)),(0,s.jsx)(r.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"absolute inset-0 m-auto w-24 h-24 rounded-full bg-gradient-to-br from-purple-400 to-indigo-500 flex items-center justify-center",children:(0,s.jsx)(n.A,{className:"h-12 w-12 text-white"})})]}),(0,s.jsx)("div",{className:"flex justify-center space-x-2",children:[0,1,2].map(e=>(0,s.jsx)(r.P.div,{initial:{scale:0},animate:{scale:[0,1,0]},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,delay:.2*e,ease:"easeInOut"},className:"w-3 h-3 bg-white rounded-full"},e))}),(0,s.jsx)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-white text-lg font-medium",children:t})]})})}},3312:(e,t,i)=>{"use strict";i.d(t,{$:()=>d});var s=i(5155),r=i(2115),n=i(1290),a=i(1027),o=i(1567);let l=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:i,variant:r,size:a,asChild:d=!1,...c}=e,x=d?n.DX:"button";return(0,s.jsx)(x,{className:(0,o.cn)(l({variant:r,size:a,className:i})),ref:t,...c})});d.displayName="Button"},415:(e,t,i)=>{"use strict";i.d(t,{h:()=>s});let s="dev"==i(2818).env.NEXT_PUBLIC_ENV?"http://localhost:5000":""},3376:(e,t,i)=>{"use strict";i.d(t,{c:()=>u,AuthProvider:()=>p,Z:()=>h});var s=i(5155),r=i(9904),n=i(2115),a=i(4565),o=i(9506),l=i(3312),d=i(2734);function c(){let{login:e}=h();return(0,s.jsx)("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-purple-900 via-purple-700 to-indigo-800",children:(0,s.jsx)("div",{className:"w-full max-w-md px-4",children:(0,s.jsxs)("div",{className:"w-full rounded-xl overflow-hidden shadow-2xl",children:[(0,s.jsx)("div",{className:"text-white h-16 bg-gradient-to-r from-purple-500 to-indigo-600 flex items-center justify-center",children:(0,s.jsx)("h1",{className:"text-2xl font-bold",children:" WalkBuddy"})}),(0,s.jsxs)("div",{className:"bg-white p-6 space-y-6",children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-600 to-indigo-700 flex items-center justify-center",children:(0,s.jsx)(d.sqp,{className:"text-white h-10 w-10"})})}),(0,s.jsxs)(l.$,{onClick:e,variant:"outline",className:"w-full h-12 flex items-center justify-center gap-2 border-2 hover:bg-purple-50 transition-colors",children:[(0,s.jsx)(o.F4b,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Googleでログイン"})]})]})]})})})}var x=i(757);let u=(0,n.createContext)({user:null,login:()=>{},logout:()=>{}});function h(){return(0,n.useContext)(u)}function p(e){let{children:t}=e,[i,o]=(0,n.useState)(void 0),l=(0,r.Wp)({apiKey:"AIzaSyBN-sIZx-rSCZ2nrjZFZhS4qIo1K1r2tLs",authDomain:"gabaithon202502saga2.firebaseapp.com",projectId:"gabaithon202502saga2",storageBucket:"gabaithon202502saga2.firebasestorage.app",messagingSenderId:"328048708813",appId:"1:328048708813:web:e4e38562abb11647c86d84",measurementId:"G-26GBYYVT0S"}),d=(0,a.xI)(l),h=new a.HF,p=async()=>{o((await (0,a.df)(d,h)).user)},m=async()=>{await (0,a.CI)(d),o(null)};return(0,n.useEffect)(()=>{d.onAuthStateChanged(e=>o(e))},[]),(0,s.jsx)(u.Provider,{value:{user:i,login:p,logout:m},children:i?t:null===i?(0,s.jsx)(c,{}):(0,s.jsx)(x.A,{message:"認証中"})})}},1567:(e,t,i)=>{"use strict";i.d(t,{cn:()=>n});var s=i(3463),r=i(9795);function n(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,r.QP)((0,s.$)(t))}},7493:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});let s=(0,i(4057).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[87,753,895,482,535,441,517,358],()=>t(1890)),_N_E=e.O()}]);