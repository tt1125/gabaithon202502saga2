"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{3312:(e,r,t)=>{t.d(r,{$:()=>c});var o=t(5155),n=t(2115),l=t(1290),a=t(1027),s=t(1567);let i=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,r)=>{let{className:t,variant:n,size:a,asChild:c=!1,...u}=e,g=c?l.DX:"button";return(0,o.jsx)(g,{className:(0,s.cn)(i({variant:n,size:a,className:t})),ref:r,...u})});c.displayName="Button"},3376:(e,r,t)=>{t.d(r,{c:()=>g,AuthProvider:()=>d,Z:()=>p});var o=t(5155),n=t(9904),l=t(2115),a=t(4565),s=t(9506),i=t(3312),c=t(2734);function u(){let{login:e}=p();return(0,o.jsx)("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-purple-900 via-purple-700 to-indigo-800",children:(0,o.jsx)("div",{className:"w-full max-w-md px-4",children:(0,o.jsxs)("div",{className:"w-full rounded-xl overflow-hidden shadow-2xl",children:[(0,o.jsx)("div",{className:"text-white h-16 bg-gradient-to-r from-purple-500 to-indigo-600 flex items-center justify-center",children:(0,o.jsx)("h1",{className:"text-2xl font-bold",children:"WALK"})}),(0,o.jsxs)("div",{className:"bg-white p-6 space-y-6",children:[(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-600 to-indigo-700 flex items-center justify-center",children:(0,o.jsx)(c.sqp,{className:"text-white h-10 w-10"})})}),(0,o.jsxs)(i.$,{onClick:e,variant:"outline",className:"w-full h-12 flex items-center justify-center gap-2 border-2 hover:bg-purple-50 transition-colors",children:[(0,o.jsx)(s.F4b,{className:"h-5 w-5"}),(0,o.jsx)("span",{children:"Googleでログイン"})]})]})]})})})}let g=(0,l.createContext)({user:null,login:()=>{},logout:()=>{}});function p(){return(0,l.useContext)(g)}function d(e){let{children:r}=e,[t,s]=(0,l.useState)(void 0),i=(0,n.Wp)({apiKey:"AIzaSyBN-sIZx-rSCZ2nrjZFZhS4qIo1K1r2tLs",authDomain:"gabaithon202502saga2.firebaseapp.com",projectId:"gabaithon202502saga2",storageBucket:"gabaithon202502saga2.firebasestorage.app",messagingSenderId:"328048708813",appId:"1:328048708813:web:e4e38562abb11647c86d84",measurementId:"G-26GBYYVT0S"}),c=(0,a.xI)(i),p=new a.HF,d=async()=>{s((await (0,a.df)(c,p)).user)},m=async()=>{await (0,a.CI)(c),s(null)};return(0,l.useEffect)(()=>{c.onAuthStateChanged(e=>s(e))},[]),(0,o.jsx)(g.Provider,{value:{user:t,login:d,logout:m},children:t?r:null===t?(0,o.jsx)(u,{}):(0,o.jsx)("div",{children:"loading..."})})}},8946:(e,r,t)=>{t.d(r,{GoogleMapProvider:()=>c,a:()=>s});var o=t(5155),n=t(2115),l=t(9047);let a=(0,n.createContext)({active:!1,setActive:()=>{},isLoaded:!1,currentLat:0,currentLng:0});function s(){return(0,n.useContext)(a)}let i={width:"100%",height:"100%"};function c(e){var r,t;let{children:s}=e,[c,u]=(0,n.useState)(null),[g,p]=(0,n.useState)(!1),d=JSON.parse(localStorage.getItem("selectedRoute")||"[]"),m=d.point1,v=d.point2,h=d.point3,{isLoaded:f}=(0,l.KD)({googleMapsApiKey:"AIzaSyCsWEFEzwVzLk6PTAWxhc-6WZzMzFKmamI",language:"ja"});(0,n.useEffect)(()=>{d=JSON.parse(localStorage.getItem("selectedRoute")||"[]")},[g]);let w=(0,n.useRef)(null),x=(0,n.useRef)(null),b=(0,n.useRef)(null),I=(0,n.useRef)(null),M=(0,n.useRef)(null),y=(0,n.useRef)(null),L=(0,n.useRef)(null),S=(0,n.useRef)(null);function C(e){b.current&&I.current&&new google.maps.DirectionsService().route({origin:e,destination:{lat:m.lat,lng:m.lng},travelMode:google.maps.TravelMode.WALKING},(r,t)=>{if("OK"===t){var o,n;null===(o=I.current)||void 0===o||o.setDirections(r),50>google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(e.lat,e.lng),new google.maps.LatLng(m.lat,m.lng))?(null===(n=I.current)||void 0===n||n.setMap(null),localStorage.setItem("progress","2")):M.current&&M.current.setMap(b.current)}})}function k(e){b.current&&M.current&&new google.maps.DirectionsService().route({origin:e,destination:v,travelMode:google.maps.TravelMode.WALKING},(r,t)=>{if("OK"===t){var o,n;null===(o=M.current)||void 0===o||o.setDirections(r),50>google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(e.lat,e.lng),new google.maps.LatLng(v.lat,v.lng))?(null===(n=M.current)||void 0===n||n.setMap(null),localStorage.setItem("progress","3")):y.current&&y.current.setMap(b.current)}})}function D(e){b.current&&y.current&&new google.maps.DirectionsService().route({origin:e,destination:h,travelMode:google.maps.TravelMode.WALKING},(r,t)=>{if("OK"===t){var o,n;null===(o=y.current)||void 0===o||o.setDirections(r),50>google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(e.lat,e.lng),new google.maps.LatLng(h.lat,h.lng))?(null===(n=y.current)||void 0===n||n.setMap(null),localStorage.setItem("progress","4")):L.current&&L.current.setMap(b.current)}})}function j(e){b.current&&L.current&&x.current&&new google.maps.DirectionsService().route({origin:e,destination:x.current,travelMode:google.maps.TravelMode.WALKING},(r,t)=>{if("OK"===t&&x.current){var o,n;null===(o=L.current)||void 0===o||o.setDirections(r),50>google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(e.lat,e.lng),new google.maps.LatLng(x.current.lat,x.current.lng))&&(null===(n=L.current)||void 0===n||n.setMap(null),p(!1),localStorage.setItem("progress","5"))}})}return(0,n.useEffect)(()=>{if(!navigator.geolocation){console.error("Geolocation not supported");return}let e=navigator.geolocation.watchPosition(e=>{let r={lat:e.coords.latitude,lng:e.coords.longitude};w.current=r,x.current||(x.current=r),u(r);let t=parseInt(localStorage.getItem("progress")||"1");t||(t=1),1==t?C(r):2==t?k(w.current):3==t?D(w.current):4==t&&j(w.current),S.current?S.current.setPosition(r):b.current&&g&&(S.current=new google.maps.Marker({position:r,map:b.current,icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"})),L.current&&x.current&&new google.maps.DirectionsService().route({origin:h,destination:x.current,travelMode:google.maps.TravelMode.WALKING},(e,r)=>{if("OK"===r){var t;null===(t=L.current)||void 0===t||t.setDirections(e)}})},e=>{console.error("Geolocation watchPosition error:",e)},{enableHighAccuracy:!0,maximumAge:2e3,timeout:5e3});return()=>{navigator.geolocation.clearWatch(e)}},[]),(0,n.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("progress")||"0");e>=1&&e<=4?p(!0):p(!1),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{u({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{console.error("Geolocation getCurrentPosition error:",e)},{enableHighAccuracy:!0}):console.error("Geolocation not supported")},[]),(0,o.jsxs)(a.Provider,{value:{active:g,setActive:p,isLoaded:f,currentLat:(null===(r=w.current)||void 0===r?void 0:r.lat)||0,currentLng:(null===(t=w.current)||void 0===t?void 0:t.lng)||0},children:[f&&c&&g&&(0,o.jsx)("div",{style:{width:"100%",height:"100vh",position:"absolute",zIndex:-1},children:(0,o.jsx)(l.u6,{onLoad:function(e){b.current=e,!x.current&&w.current&&(x.current=w.current),w.current&&C(w.current),new google.maps.Marker({position:m,map:e,label:{text:"A",color:"white",fontWeight:"bold"},icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#4285F4",fillOpacity:1,strokeWeight:0,scale:15}}),new google.maps.Marker({position:v,map:e,label:{text:"B",color:"white",fontWeight:"bold"},icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#34A853",fillOpacity:1,strokeWeight:0,scale:15}}),new google.maps.Marker({position:h,map:e,label:{text:"C",color:"white",fontWeight:"bold"},icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#FBBC05",fillOpacity:1,strokeWeight:0,scale:15}}),x.current&&new google.maps.Marker({position:x.current,map:e,label:{text:"D",color:"white",fontWeight:"bold"},icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"#DB4437",fillOpacity:1,strokeWeight:0,scale:15}}),e.addListener("click",e=>{if(e.latLng){let r={lat:e.latLng.lat(),lng:e.latLng.lng()};w.current=r,u(r);let t=parseInt(localStorage.getItem("progress")||"1");t||(t=1),1==t?C(r):2==t?(k(w.current),I.current&&I.current.setMap(null)):3==t?(D(w.current),I.current&&I.current.setMap(null),M.current&&M.current.setMap(null)):4==t&&(j(w.current),I.current&&I.current.setMap(null),M.current&&M.current.setMap(null),y.current&&y.current.setMap(null)),S.current?S.current.setPosition(r):b.current&&(S.current=new google.maps.Marker({position:r,map:b.current,icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"})),L.current&&x.current&&new google.maps.DirectionsService().route({origin:h,destination:x.current,travelMode:google.maps.TravelMode.WALKING},(e,r)=>{if("OK"===r){var t;null===(t=L.current)||void 0===t||t.setDirections(e)}})}}),5>parseInt(localStorage.getItem("progress")||"1")&&(L.current=new google.maps.DirectionsRenderer({polylineOptions:{strokeColor:"#DB4437",zIndex:1,strokeWeight:5},suppressMarkers:!0,preserveViewport:!0}),L.current.setMap(e)),4>parseInt(localStorage.getItem("progress")||"1")&&(y.current=new google.maps.DirectionsRenderer({polylineOptions:{strokeColor:"#FBBC05",zIndex:2,strokeWeight:5},suppressMarkers:!0,preserveViewport:!0}),y.current.setMap(e)),3>parseInt(localStorage.getItem("progress")||"1")&&(M.current=new google.maps.DirectionsRenderer({polylineOptions:{strokeColor:"#34A853",zIndex:3,strokeWeight:5},suppressMarkers:!0,preserveViewport:!0}),M.current.setMap(e)),2>parseInt(localStorage.getItem("progress")||"1")&&(I.current=new google.maps.DirectionsRenderer({polylineOptions:{strokeColor:"#4285F4",zIndex:4,strokeWeight:5},suppressMarkers:!0,preserveViewport:!0}),I.current.setMap(e)),function(){if(!b.current)return;let e=new google.maps.DirectionsService;w.current&&e.route({origin:h,destination:w.current,travelMode:google.maps.TravelMode.WALKING},(e,r)=>{"OK"===r&&L.current&&L.current.setDirections(e)}),e.route({origin:v,destination:h,travelMode:google.maps.TravelMode.WALKING},(e,r)=>{"OK"===r&&y.current&&y.current.setDirections(e)}),e.route({origin:m,destination:v,travelMode:google.maps.TravelMode.WALKING},(e,r)=>{"OK"===r&&M.current&&M.current.setDirections(e)})}()},mapContainerStyle:i,center:c,zoom:18,options:{mapTypeControl:!1,zoomControl:!0,streetViewControl:!1,fullscreenControl:!1}})}),s]})}},1567:(e,r,t)=>{t.d(r,{cn:()=>l});var o=t(3463),n=t(9795);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.QP)((0,o.$)(r))}}}]);